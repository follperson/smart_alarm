{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Active Alarms Home{% endblock %}</h1>
{% endblock %}

{% block content %}
<form method="POST">
      <table width="100%">
        <thead><tr>
          <th>Alarm Title</th>
          <th>Alarm Time</th>
          <th>Playlist</th>
          <th>Wake Window</th>
          <th>Snooze Time</th>
          <th>Next Alarm Time</th>
          <th width="10%"> Turn on/off</th>
          {% if any_active %}
            <th width="40%"> Snooze, etc </th>
          {% endif %}
        </tr></thead>
      {% for alarm_id in alarms %}

        {% if alarms[alarm_id]['active'] %}
          {% if alarms[alarm_id]['snoozed'] %}
            <tr bgcolor="yellow">
          {% elif alarms[alarm_id]['running'] %}
            <tr bgcolor="darkviolet">
          {% else %}
            <tr bgcolor="greenyellow">
          {% endif %}
        {% else %}
          <tr bgcolor="salmon">
        {% endif %}
          <td>{{alarms[alarm_id]['name']}}</td>
          <td>{{alarms[alarm_id]['alarm_time']}}</td>
          <td>{{alarms[alarm_id]['playlist_name']}}</td>
          <td>{{alarms[alarm_id]['wake_window']}}</td>
          <td>{{alarms[alarm_id]['snooze_time']}}</td>
          <td>{{alarms[alarm_id]['next_alarm_time']}}</td>
        <td><input width="10%" type="submit" name="io_{{alarm_id}}" value="Turn On/Off"></td>
        {% if any_active %}
        <td colspan="6">
            {% if alarms[alarm_id]['snoozed'] %}
              {{ alarms[alarm_id]['snooze_time_left'] }} seconds left of snooze
            {% elif alarms[alarm_id]['running'] %}
              <input width="50%" style="background-color:red" type="submit" name="snooze_{{alarm_id}}" value="Snooze">
            {% endif %}
          {% if alarms[alarm_id]['running'] %}
            <input style="background-color:lightblue" type="submit" name="mute_{{alarm_id}}" value="ToggleAudio">
            <input style="background-color:lightgreen" type="submit" name="blind_{{alarm_id}}" value="ToggleColor">
            <input style="background-color:orange" type="submit" name="skip_songs_{{alarm_id}}" value="SkipSongs">
            <input style="background-color:white" type="submit" name="cancel_{{alarm_id}}" value="Cancel">
          {% endif %}

        </td>
        {% endif %}
      </tr>
      {% endfor %}
      </table>
  <button class="button snooze" type="Submit" name="snooze_generic" value="snooze_generic">Snooze Any Current Alarm</button>
  </form>
{% endblock %}
