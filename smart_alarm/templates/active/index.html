{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Active Alarms Home{% endblock %}</h1>
{% endblock %}

{% block content %}
<form method="POST">
      <table width="100%">
        <thead><tr>
          <th>Alarm Title</th>
          <th>Alarm Time</th>
          <th>Playlist</th>
          <th>Wake Window</th>
          <th>Snooze Time</th>
          <th>Next Alarm Time</th>
          <th width="30%"> Snooze </th>
          <th width="10%"> Turn on/off</th>
        </tr></thead>
      {% for alarm_id in alarms %}

        {% if alarms[alarm_id]['active'] %}
          {% if alarms[alarm_id]['snoozed'] %}
            <tr bgcolor="yellow">
          {% elif alarms[alarm_id]['running'] %}
            <tr bgcolor="darkviolet">
          {% else %}
            <tr bgcolor="greenyellow">
          {% endif %}
        {% else %}
          <tr bgcolor="salmon">
        {% endif %}
          <td>{{alarms[alarm_id]['name']}}</td>
          <td>{{alarms[alarm_id]['alarm_time']}}</td>
          <td>{{alarms[alarm_id]['playlist_name']}}</td>
          <td>{{alarms[alarm_id]['wake_window']}}</td>
          <td>{{alarms[alarm_id]['snooze_time']}}</td>
          <td>{{alarms[alarm_id]['next_alarm_time']}}</td>
          <td>{% if alarms[alarm_id]['snoozed'] %}
              {{ alarms[alarm_id]['snooze_time_left'] }} seconds left of snooze
              {% elif alarms[alarm_id]['running'] %}
            <input width="30%" type="submit" name="snooze_{{alarm_id}}" value="Snooze">
              {% endif %}</td>
          <td><input width="10%" type="submit" name="io_{{alarm_id}}" value="Turn On/Off"></td>
        </tr>
      {% endfor %}
      </table>
  <button class="button snooze" type="Submit" name="snooze_generic" value="snooze_generic">Snooze Any Current Alarm</button>
  </form>
{% endblock %}
